{"version":3,"sources":["../../../../../../Desktop/SIP-Buddy/components/ProfileContent.tsx","../../../../../../Desktop/SIP-Buddy/app/profile/page.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { updateProfile } from 'firebase/auth';\r\nimport { auth } from '../services/firebase';\r\nimport { updateUserProfileDocument } from '../services/firestoreService';\r\nimport { IconUser, IconMail, IconLogout } from '../components/Icons';\r\nimport { useGlobalContext } from '../context/GlobalContext';\r\n\r\nconst Profile: React.FC = () => {\r\n  const { user, handleLogout, handleProfileUpdate } = useGlobalContext();\r\n\r\n  const [displayName, setDisplayName] = useState(user?.displayName || '');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setDisplayName(user.displayName || '');\r\n    }\r\n  }, [user]);\r\n\r\n  if (!user) {\r\n    return <div>Loading profile...</div>;\r\n  }\r\n\r\n  const handleProfileSave = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!auth.currentUser || displayName === user.displayName) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setSuccessMessage(null);\r\n\r\n    try {\r\n      await updateProfile(auth.currentUser, { displayName });\r\n      await updateUserProfileDocument(user.uid, { displayName });\r\n\r\n      if (auth.currentUser) {\r\n        handleProfileUpdate(auth.currentUser);\r\n      }\r\n\r\n      setSuccessMessage('Display name updated successfully!');\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An unknown error occurred.');\r\n    } finally {\r\n      setIsLoading(false);\r\n      setTimeout(() => setSuccessMessage(null), 3000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto\">\r\n      <div className=\"text-center mb-8\">\r\n        <h1 className=\"text-2xl sm:text-3xl font-bold text-slate-900\">Profile Settings</h1>\r\n        <p className=\"text-slate-600\">Manage your account details.</p>\r\n      </div>\r\n\r\n      <div className=\"bg-white p-8 rounded-2xl shadow-lg border border-slate-200\">\r\n        {error && <p className=\"bg-red-100 text-red-700 p-3 rounded-md text-sm mb-4\">{error}</p>}\r\n        {successMessage && <p className=\"bg-green-100 text-green-700 p-3 rounded-md text-sm mb-4\">{successMessage}</p>}\r\n\r\n        <form onSubmit={handleProfileSave} className=\"space-y-6\">\r\n          <div className=\"flex flex-col items-center space-y-4\">\r\n            <div className=\"relative\">\r\n              {user.photoURL ? (\r\n                <img src={user.photoURL} alt=\"Profile\" className=\"w-24 h-24 sm:w-28 sm:h-28 rounded-full object-cover ring-4 ring-slate-200\" />\r\n              ) : (\r\n                <div className=\"w-24 h-24 sm:w-28 sm:h-28 rounded-full bg-slate-200 flex items-center justify-center ring-4 ring-slate-200\">\r\n                  <IconUser className=\"h-12 w-12 sm:h-14 sm:w-14 text-slate-500\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"displayName\" className=\"block text-sm font-medium text-slate-700\">Display Name</label>\r\n            <div className=\"relative mt-1\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <IconUser className=\"h-5 w-5 text-slate-400\" />\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                id=\"displayName\"\r\n                value={displayName}\r\n                onChange={(e) => setDisplayName(e.target.value)}\r\n                className=\"w-full pl-10 pr-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-700\">Email Address</label>\r\n            <div className=\"relative mt-1\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <IconMail className=\"h-5 w-5 text-slate-400\" />\r\n              </div>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                value={user.email || ''}\r\n                disabled\r\n                className=\"w-full pl-10 pr-3 py-2 bg-slate-100 border border-slate-300 rounded-md shadow-sm text-slate-500 cursor-not-allowed\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pt-4 border-t border-slate-200 flex justify-end\">\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading || displayName === user.displayName}\r\n              className=\"w-full sm:w-auto flex justify-center items-center gap-2 py-2.5 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed\"\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                'Save Changes'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"mt-8 pt-6 border-t border-slate-200\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleLogout}\r\n            className=\"w-full sm:w-auto flex justify-center items-center gap-2 py-2.5 px-6 bg-red-50 text-red-600 font-semibold rounded-lg hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors\"\r\n          >\r\n            <IconLogout className=\"w-5 w-5\" />\r\n            Logout\r\n          </button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;","'use client';\r\n\r\nimport Profile from '../../components/ProfileContent';\r\n\r\nexport default function ProfilePage() {\r\n    return <Profile />;\r\n}\r\n"],"names":[],"mappings":"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"}