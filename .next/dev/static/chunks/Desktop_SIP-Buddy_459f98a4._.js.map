{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/RAGHAV%20GUPTA/Desktop/SIP-Buddy/components/tools/FindAdvisor.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { findFinancialAdvisors } from '../../services/geminiService';\r\nimport { FinancialAdvisor, GroundingChunk } from '../../types';\r\nimport { IconInfoCircle, IconMapPin, IconPhone, IconWorld } from '../../components/Icons';\r\n\r\nconst DEFAULT_MAP_URL = 'https://www.google.com/maps?q=India&z=5&output=embed';\r\n\r\nconst FindAdvisor: React.FC = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [advisors, setAdvisors] = useState<FinancialAdvisor[]>([]);\r\n  const [groundingChunks, setGroundingChunks] = useState<GroundingChunk[]>([]);\r\n  const [mapUrl, setMapUrl] = useState(DEFAULT_MAP_URL);\r\n  const [selectedAdvisor, setSelectedAdvisor] = useState<FinancialAdvisor | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  const fetchAdvisors = async (location: { latitude: number; longitude: number } | { query: string }) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setAdvisors([]);\r\n    setSelectedAdvisor(null);\r\n    try {\r\n      const { advisors: fetchedAdvisors, groundingChunks: fetchedChunks } = await findFinancialAdvisors(location);\r\n      if(fetchedAdvisors.length === 0) {\r\n        setError(\"No financial advisors found for this location. Please try a different search.\");\r\n      } else {\r\n        setAdvisors(fetchedAdvisors);\r\n        setGroundingChunks(fetchedChunks as GroundingChunk[]);\r\n        \r\n        const firstAdvisorWithCoords = fetchedAdvisors.find(a => a.latitude !== null && a.longitude !== null);\r\n        const firstAdvisor = fetchedAdvisors[0] || null;\r\n\r\n        // Select the first advisor by default to show details immediately\r\n        setSelectedAdvisor(firstAdvisor);\r\n\r\n        if (firstAdvisorWithCoords) {\r\n            setMapUrl(`https://www.google.com/maps?q=${firstAdvisorWithCoords.latitude},${firstAdvisorWithCoords.longitude}&z=15&output=embed`);\r\n        } else if ('query' in location) {\r\n            setMapUrl(`https://www.google.com/maps?q=${location.query.replace(/ /g, '+')}&z=12&output=embed`);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An unknown error occurred while fetching advisors.');\r\n      console.error(err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        setMapUrl(`https://www.google.com/maps?q=${latitude},${longitude}&z=13&output=embed`);\r\n        fetchAdvisors({ latitude, longitude });\r\n      },\r\n      (geoError) => {\r\n        console.warn('Geolocation denied:', geoError.message);\r\n        setError('Could not get your location. Please use the search bar to find advisors.');\r\n        setIsLoading(false);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  const handleSearch = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (searchQuery.trim()) {\r\n      fetchAdvisors({ query: searchQuery });\r\n    }\r\n  };\r\n  \r\n  const handleSelectAdvisor = (advisor: FinancialAdvisor) => {\r\n    setSelectedAdvisor(advisor);\r\n    if (advisor.latitude !== null && advisor.longitude !== null) {\r\n      setMapUrl(`https://www.google.com/maps?q=${advisor.latitude},${advisor.longitude}&z=15&output=embed`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"text-center mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-slate-900 mb-1\">Find a Financial Advisor</h1>\r\n        <p className=\"text-slate-600\">Discover registered advisors near you based on live data.</p>\r\n      </div>\r\n      <form onSubmit={handleSearch} className=\"max-w-xl mx-auto mb-6 flex gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          placeholder=\"Enter a city or pin code...\"\r\n          className=\"w-full px-4 py-3 bg-white rounded-full border border-slate-300 focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition\"\r\n        />\r\n        <button type=\"submit\" className=\"px-6 py-3 bg-cyan-600 text-white font-semibold rounded-full hover:bg-cyan-700 transition-colors\">\r\n          Search\r\n        </button>\r\n      </form>\r\n\r\n      <div className=\"mb-8 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-r-lg\">\r\n          <div className=\"flex\">\r\n              <div className=\"py-1\"><IconInfoCircle className=\"h-5 w-5 text-yellow-400 mr-3 flex-shrink-0\" /></div>\r\n              <div>\r\n                  <p className=\"font-bold\">Disclaimer:</p>\r\n                  <p className=\"text-sm\">Advisor information is provided by Google Maps and may not be exhaustive. Always verify credentials before engaging with a financial advisor.</p>\r\n              </div>\r\n          </div>\r\n      </div>\r\n      \r\n      <div className=\"grid lg:grid-cols-2 gap-8\" style={{ height: 'calc(100vh - 350px)', minHeight: '550px' }}>\r\n        <div className=\"lg:col-span-1 bg-slate-200 rounded-xl overflow-hidden shadow-lg border border-slate-300\">\r\n           <iframe\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              style={{ border: 0 }}\r\n              loading=\"lazy\"\r\n              allowFullScreen\r\n              src={mapUrl}\r\n            ></iframe>\r\n        </div>\r\n        <div className=\"lg:col-span-1 flex flex-col gap-6\">\r\n            <div className=\"bg-white p-4 rounded-xl shadow-lg border border-slate-200 flex flex-col h-1/2\">\r\n                 <h2 className=\"text-lg font-semibold text-slate-800 mb-3 pb-3 border-b border-slate-200 flex-shrink-0\">Advisors Found</h2>\r\n                 <div className=\"flex-grow overflow-y-auto pr-2\">\r\n                    {isLoading && <div className=\"text-center p-8 text-slate-500\">\r\n                        <div className=\"w-8 h-8 border-4 border-cyan-200 border-t-cyan-600 rounded-full animate-spin mx-auto mb-4\"></div>\r\n                        Searching for advisors...\r\n                    </div>}\r\n                    {error && !isLoading && <div className=\"text-center p-8 text-red-600 bg-red-50 rounded-lg\">{error}</div>}\r\n                    {!isLoading && !error && advisors.length > 0 && (\r\n                        <ul className=\"space-y-2\">\r\n                            {advisors.map((advisor, index) => {\r\n                                const hasCoords = advisor.latitude !== null && advisor.longitude !== null;\r\n                                return (\r\n                                    <li key={index}>\r\n                                        <button onClick={() => handleSelectAdvisor(advisor)} className={`w-full text-left p-3 rounded-lg border-2 transition-all ${selectedAdvisor?.name === advisor.name && selectedAdvisor.address === advisor.address ? 'bg-cyan-50 border-cyan-500 shadow-sm' : 'border-transparent hover:bg-slate-100'}`}>\r\n                                            <p className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n                                                <IconMapPin className={`h-4 w-4 flex-shrink-0 ${hasCoords ? 'text-cyan-600' : 'text-slate-400'}`} />\r\n                                                {advisor.name}\r\n                                            </p>\r\n                                            {advisor.firm && <p className=\"text-sm text-slate-600 pl-6\">{advisor.firm}</p>}\r\n                                            <p className=\"text-xs text-slate-500 mt-1 pl-6 line-clamp-1\">{advisor.address}</p>\r\n                                        </button>\r\n                                    </li>\r\n                                );\r\n                            })}\r\n                        </ul>\r\n                    )}\r\n                 </div>\r\n            </div>\r\n            <div className=\"bg-white p-4 rounded-xl shadow-lg border border-slate-200 flex flex-col h-1/2\">\r\n                <h2 className=\"text-lg font-semibold text-slate-800 mb-3 pb-3 border-b border-slate-200 flex-shrink-0\">Details</h2>\r\n                <div className=\"flex-grow overflow-y-auto pr-2\">\r\n                    {selectedAdvisor ? (\r\n                        <div>\r\n                            <h3 className=\"text-xl font-bold text-slate-900 mb-1\">{selectedAdvisor.name}</h3>\r\n                            {selectedAdvisor.firm && <p className=\"text-md text-slate-600 font-semibold mb-4\">{selectedAdvisor.firm}</p>}\r\n                            \r\n                            <ul className=\"space-y-4 text-sm\">\r\n                                <li className=\"flex items-start gap-3\">\r\n                                    <IconMapPin className=\"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0\" />\r\n                                    <span className=\"text-slate-700\">{selectedAdvisor.address}</span>\r\n                                </li>\r\n                                {selectedAdvisor.phone && (\r\n                                    <li className=\"flex items-center gap-3\">\r\n                                        <IconPhone className=\"h-5 w-5 text-slate-400 flex-shrink-0\" />\r\n                                        <a href={`tel:${selectedAdvisor.phone}`} className=\"text-blue-600 hover:underline\">{selectedAdvisor.phone}</a>\r\n                                    </li>\r\n                                )}\r\n                                {selectedAdvisor.website && (\r\n                                    <li className=\"flex items-center gap-3\">\r\n                                        <IconWorld className=\"h-5 w-5 text-slate-400 flex-shrink-0\" />\r\n                                        <a href={selectedAdvisor.website.startsWith('http') ? selectedAdvisor.website : `https://${selectedAdvisor.website}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline break-all\">{selectedAdvisor.website}</a>\r\n                                    </li>\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex items-center justify-center h-full text-slate-500 text-center\">\r\n                            <p>\r\n                                {isLoading ? 'Loading details...' : 'Select an advisor from the list to see their details.'}\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {groundingChunks.length > 0 && selectedAdvisor && (\r\n                    <div className=\"mt-4 pt-3 border-t border-slate-200 text-xs text-slate-500 flex-shrink-0\">\r\n                        <p className=\"font-semibold mb-2\">Data Sources:</p>\r\n                        <ul className=\"list-disc list-inside space-y-1\">\r\n                        {groundingChunks.map((chunk, index) => (\r\n                            chunk.maps?.uri ? (\r\n                                <li key={index} className=\"truncate\">\r\n                                    <a href={chunk.maps.uri} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline\">{chunk.maps.title || 'Google Maps Source'}</a>\r\n                                </li>\r\n                            ) : null\r\n                        ))}\r\n                        </ul>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FindAdvisor;"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;;AAEA,MAAM,kBAAkB;AAExB,MAAM,cAAwB;;IAC5B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,oMAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,oMAAQ,EAAgB;IAClD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,oMAAQ,EAAqB,EAAE;IAC/D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,oMAAQ,EAAmB,EAAE;IAC3E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,oMAAQ,EAAC;IACrC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,oMAAQ,EAA0B;IAChF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,oMAAQ,EAAC;IAE/C,MAAM,gBAAgB,OAAO;QAC3B,aAAa;QACb,SAAS;QACT,YAAY,EAAE;QACd,mBAAmB;QACnB,IAAI;YACF,MAAM,EAAE,UAAU,eAAe,EAAE,iBAAiB,aAAa,EAAE,GAAG,MAAM,IAAA,gLAAqB,EAAC;YAClG,IAAG,gBAAgB,MAAM,KAAK,GAAG;gBAC/B,SAAS;YACX,OAAO;gBACL,YAAY;gBACZ,mBAAmB;gBAEnB,MAAM,yBAAyB,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,QAAQ,EAAE,SAAS,KAAK;gBAChG,MAAM,eAAe,eAAe,CAAC,EAAE,IAAI;gBAE3C,kEAAkE;gBAClE,mBAAmB;gBAEnB,IAAI,wBAAwB;oBACxB,UAAU,CAAC,8BAA8B,EAAE,uBAAuB,QAAQ,CAAC,CAAC,EAAE,uBAAuB,SAAS,CAAC,kBAAkB,CAAC;gBACtI,OAAO,IAAI,WAAW,UAAU;oBAC5B,UAAU,CAAC,8BAA8B,EAAE,SAAS,KAAK,CAAC,OAAO,CAAC,MAAM,KAAK,kBAAkB,CAAC;gBACpG;YACF;QACF,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,aAAa;QACf;IACF;IAEA,IAAA,qMAAS;iCAAC;YACR,UAAU,WAAW,CAAC,kBAAkB;yCACtC,CAAC;oBACC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,SAAS,MAAM;oBAC/C,UAAU,CAAC,8BAA8B,EAAE,SAAS,CAAC,EAAE,UAAU,kBAAkB,CAAC;oBACpF,cAAc;wBAAE;wBAAU;oBAAU;gBACtC;;yCACA,CAAC;oBACC,QAAQ,IAAI,CAAC,uBAAuB,SAAS,OAAO;oBACpD,SAAS;oBACT,aAAa;gBACf;;QAEJ;gCAAG,EAAE;IAEL,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,YAAY,IAAI,IAAI;YACtB,cAAc;gBAAE,OAAO;YAAY;QACrC;IACF;IAEA,MAAM,sBAAsB,CAAC;QAC3B,mBAAmB;QACnB,IAAI,QAAQ,QAAQ,KAAK,QAAQ,QAAQ,SAAS,KAAK,MAAM;YAC3D,UAAU,CAAC,8BAA8B,EAAE,QAAQ,QAAQ,CAAC,CAAC,EAAE,QAAQ,SAAS,CAAC,kBAAkB,CAAC;QACtG;IACF;IAEA,qBACE,wNAAC;;0BACC,wNAAC;gBAAI,WAAU;;kCACb,wNAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,wNAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;0BAEhC,wNAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,wNAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,aAAY;wBACZ,WAAU;;;;;;kCAEZ,wNAAC;wBAAO,MAAK;wBAAS,WAAU;kCAAkG;;;;;;;;;;;;0BAKpI,wNAAC;gBAAI,WAAU;0BACX,cAAA,wNAAC;oBAAI,WAAU;;sCACX,wNAAC;4BAAI,WAAU;sCAAO,cAAA,wNAAC,oKAAc;gCAAC,WAAU;;;;;;;;;;;sCAChD,wNAAC;;8CACG,wNAAC;oCAAE,WAAU;8CAAY;;;;;;8CACzB,wNAAC;oCAAE,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;0BAKnC,wNAAC;gBAAI,WAAU;gBAA4B,OAAO;oBAAE,QAAQ;oBAAuB,WAAW;gBAAQ;;kCACpG,wNAAC;wBAAI,WAAU;kCACZ,cAAA,wNAAC;4BACE,OAAM;4BACN,QAAO;4BACP,OAAO;gCAAE,QAAQ;4BAAE;4BACnB,SAAQ;4BACR,eAAe;4BACf,KAAK;;;;;;;;;;;kCAGX,wNAAC;wBAAI,WAAU;;0CACX,wNAAC;gCAAI,WAAU;;kDACV,wNAAC;wCAAG,WAAU;kDAAyF;;;;;;kDACvG,wNAAC;wCAAI,WAAU;;4CACX,2BAAa,wNAAC;gDAAI,WAAU;;kEACzB,wNAAC;wDAAI,WAAU;;;;;;oDAAkG;;;;;;;4CAGpH,SAAS,CAAC,2BAAa,wNAAC;gDAAI,WAAU;0DAAqD;;;;;;4CAC3F,CAAC,aAAa,CAAC,SAAS,SAAS,MAAM,GAAG,mBACvC,wNAAC;gDAAG,WAAU;0DACT,SAAS,GAAG,CAAC,CAAC,SAAS;oDACpB,MAAM,YAAY,QAAQ,QAAQ,KAAK,QAAQ,QAAQ,SAAS,KAAK;oDACrE,qBACI,wNAAC;kEACG,cAAA,wNAAC;4DAAO,SAAS,IAAM,oBAAoB;4DAAU,WAAW,CAAC,wDAAwD,EAAE,iBAAiB,SAAS,QAAQ,IAAI,IAAI,gBAAgB,OAAO,KAAK,QAAQ,OAAO,GAAG,yCAAyC,yCAAyC;;8EACjS,wNAAC;oEAAE,WAAU;;sFACT,wNAAC,gKAAU;4EAAC,WAAW,CAAC,sBAAsB,EAAE,YAAY,kBAAkB,kBAAkB;;;;;;wEAC/F,QAAQ,IAAI;;;;;;;gEAEhB,QAAQ,IAAI,kBAAI,wNAAC;oEAAE,WAAU;8EAA+B,QAAQ,IAAI;;;;;;8EACzE,wNAAC;oEAAE,WAAU;8EAAiD,QAAQ,OAAO;;;;;;;;;;;;uDAP5E;;;;;gDAWjB;;;;;;;;;;;;;;;;;;0CAKhB,wNAAC;gCAAI,WAAU;;kDACX,wNAAC;wCAAG,WAAU;kDAAyF;;;;;;kDACvG,wNAAC;wCAAI,WAAU;kDACV,gCACG,wNAAC;;8DACG,wNAAC;oDAAG,WAAU;8DAAyC,gBAAgB,IAAI;;;;;;gDAC1E,gBAAgB,IAAI,kBAAI,wNAAC;oDAAE,WAAU;8DAA6C,gBAAgB,IAAI;;;;;;8DAEvG,wNAAC;oDAAG,WAAU;;sEACV,wNAAC;4DAAG,WAAU;;8EACV,wNAAC,gKAAU;oEAAC,WAAU;;;;;;8EACtB,wNAAC;oEAAK,WAAU;8EAAkB,gBAAgB,OAAO;;;;;;;;;;;;wDAE5D,gBAAgB,KAAK,kBAClB,wNAAC;4DAAG,WAAU;;8EACV,wNAAC,+JAAS;oEAAC,WAAU;;;;;;8EACrB,wNAAC;oEAAE,MAAM,CAAC,IAAI,EAAE,gBAAgB,KAAK,EAAE;oEAAE,WAAU;8EAAiC,gBAAgB,KAAK;;;;;;;;;;;;wDAGhH,gBAAgB,OAAO,kBACpB,wNAAC;4DAAG,WAAU;;8EACV,wNAAC,+JAAS;oEAAC,WAAU;;;;;;8EACrB,wNAAC;oEAAE,MAAM,gBAAgB,OAAO,CAAC,UAAU,CAAC,UAAU,gBAAgB,OAAO,GAAG,CAAC,QAAQ,EAAE,gBAAgB,OAAO,EAAE;oEAAE,QAAO;oEAAS,KAAI;oEAAsB,WAAU;8EAA2C,gBAAgB,OAAO;;;;;;;;;;;;;;;;;;;;;;;qGAM5P,wNAAC;4CAAI,WAAU;sDACX,cAAA,wNAAC;0DACI,YAAY,uBAAuB;;;;;;;;;;;;;;;;oCAKnD,gBAAgB,MAAM,GAAG,KAAK,iCAC3B,wNAAC;wCAAI,WAAU;;0DACX,wNAAC;gDAAE,WAAU;0DAAqB;;;;;;0DAClC,wNAAC;gDAAG,WAAU;0DACb,gBAAgB,GAAG,CAAC,CAAC,OAAO,QACzB,MAAM,IAAI,EAAE,oBACR,wNAAC;wDAAe,WAAU;kEACtB,cAAA,wNAAC;4DAAE,MAAM,MAAM,IAAI,CAAC,GAAG;4DAAE,QAAO;4DAAS,KAAI;4DAAsB,WAAU;sEAAiC,MAAM,IAAI,CAAC,KAAK,IAAI;;;;;;uDAD7H;;;;mGAGT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUhC;GAnMM;KAAA;uCAqMS"}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/RAGHAV%20GUPTA/Desktop/SIP-Buddy/components/tools/FinIQChallenge.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { QuizDifficulty, QuizMode, QuizQuestion, QuizResult, Page } from '../../types';\r\nimport { generateQuizQuestions } from '../../services/geminiService';\r\nimport { IconTrophy, IconClock, IconBrain, IconTarget, IconSparkles, IconParty, IconChecklist, IconX, IconArrowUp } from '../../components/Icons';\r\n\r\ninterface FinIQChallengeProps {\r\n  onBack: () => void;\r\n  navigateTo?: (path: string, params?: any) => void;\r\n}\r\n\r\n// --- Levenshtein Distance for Fuzzy Matching ---\r\n// Returns the number of edits (inserts, deletes, substitutions) required to change 'a' to 'b'\r\nconst levenshteinDistance = (a: string, b: string): number => {\r\n  if (a.length === 0) return b.length;\r\n  if (b.length === 0) return a.length;\r\n\r\n  const matrix = [];\r\n\r\n  // Increment along the first column of each row\r\n  for (let i = 0; i <= b.length; i++) {\r\n    matrix[i] = [i];\r\n  }\r\n\r\n  // Increment each column in the first row\r\n  for (let j = 0; j <= a.length; j++) {\r\n    matrix[0][j] = j;\r\n  }\r\n\r\n  // Fill in the rest of the matrix\r\n  for (let i = 1; i <= b.length; i++) {\r\n    for (let j = 1; j <= a.length; j++) {\r\n      if (b.charAt(i - 1) === a.charAt(j - 1)) {\r\n        matrix[i][j] = matrix[i - 1][j - 1];\r\n      } else {\r\n        matrix[i][j] = Math.min(\r\n          matrix[i - 1][j - 1] + 1, // substitution\r\n          Math.min(\r\n            matrix[i][j - 1] + 1, // insertion\r\n            matrix[i - 1][j] + 1  // deletion\r\n          )\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return matrix[b.length][a.length];\r\n};\r\n\r\n// Returns true if the distance is within an acceptable threshold based on word length\r\nconst isFuzzyMatch = (input: string, target: string): boolean => {\r\n  const normalizedInput = input.trim().toLowerCase();\r\n  const normalizedTarget = target.trim().toLowerCase();\r\n\r\n  if (normalizedInput === normalizedTarget) return true;\r\n\r\n  const distance = levenshteinDistance(normalizedInput, normalizedTarget);\r\n\r\n  // Threshold logic:\r\n  // Length <= 4: Exact match required (dist 0)\r\n  // Length 5-8: Allow 1 error\r\n  // Length > 8: Allow 2 errors\r\n  const threshold = normalizedTarget.length <= 4 ? 0 : normalizedTarget.length <= 8 ? 1 : 2;\r\n\r\n  return distance <= threshold;\r\n};\r\n\r\n\r\n// --- Circular Timer Component ---\r\nconst CircularTimer: React.FC<{ time: number; maxTime?: number; mode: QuizMode }> = ({ time, maxTime, mode }) => {\r\n  const radius = 20;\r\n  const circumference = 2 * Math.PI * radius;\r\n\r\n  let progress = 1;\r\n  // For timed modes, calculate remaining percentage\r\n  if (mode !== 'Relaxed' && maxTime) {\r\n    progress = Math.max(0, time / maxTime);\r\n  }\r\n\r\n  // Calculate stroke offset (0 = full circle, circumference = empty)\r\n  // We want it to deplete, so we start at 0 offset (full) and go to circumference\r\n  const strokeDashoffset = circumference - (progress * circumference);\r\n\r\n  // Color logic\r\n  let colorClass = \"text-blue-600\";\r\n  let strokeClass = \"stroke-blue-600\";\r\n\r\n  if (mode !== 'Relaxed') {\r\n    if (progress < 0.2) {\r\n      colorClass = \"text-red-600\";\r\n      strokeClass = \"stroke-red-600\";\r\n    } else if (progress < 0.5) {\r\n      colorClass = \"text-yellow-500\";\r\n      strokeClass = \"stroke-yellow-500\";\r\n    } else {\r\n      colorClass = \"text-green-500\";\r\n      strokeClass = \"stroke-green-500\";\r\n    }\r\n  } else {\r\n    strokeClass = \"stroke-slate-300\";\r\n    colorClass = \"text-slate-600\";\r\n  }\r\n\r\n  // Format time MM:SS\r\n  const minutes = Math.floor(time / 60);\r\n  const seconds = time % 60;\r\n  const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n\r\n  return (\r\n    <div className=\"relative flex items-center justify-center w-16 h-16\">\r\n      <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 50 50\">\r\n        {/* Background Circle */}\r\n        <circle\r\n          cx=\"25\"\r\n          cy=\"25\"\r\n          r={radius}\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"4\"\r\n          fill=\"transparent\"\r\n          className=\"text-slate-100\"\r\n        />\r\n        {/* Progress Circle - Only for timed modes or static ring for relaxed */}\r\n        <circle\r\n          cx=\"25\"\r\n          cy=\"25\"\r\n          r={radius}\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"4\"\r\n          fill=\"transparent\"\r\n          strokeDasharray={circumference}\r\n          strokeDashoffset={mode === 'Relaxed' ? 0 : strokeDashoffset}\r\n          strokeLinecap=\"round\"\r\n          className={`transition-all duration-1000 ease-linear ${strokeClass}`}\r\n        />\r\n      </svg>\r\n      <span className={`absolute text-xs font-bold font-mono ${colorClass}`}>\r\n        {timeString}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Confetti Component ---\r\nconst Confetti: React.FC = () => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n\r\n    const particles: any[] = [];\r\n    const colors = ['#FFC700', '#FF0000', '#2E3192', '#41BBC7'];\r\n\r\n    for (let i = 0; i < 200; i++) {\r\n      particles.push({\r\n        x: Math.random() * canvas.width,\r\n        y: Math.random() * canvas.height - canvas.height,\r\n        w: Math.random() * 10 + 5,\r\n        h: Math.random() * 10 + 5,\r\n        color: colors[Math.floor(Math.random() * colors.length)],\r\n        speed: Math.random() * 5 + 2,\r\n        angle: Math.random() * 360,\r\n        spin: Math.random() < 0.5 ? 1 : -1,\r\n      });\r\n    }\r\n\r\n    let animationId: number;\r\n\r\n    const draw = () => {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      particles.forEach((p) => {\r\n        p.y += p.speed;\r\n        p.angle += p.spin;\r\n        ctx.save();\r\n        ctx.translate(p.x, p.y);\r\n        ctx.rotate((p.angle * Math.PI) / 180);\r\n        ctx.fillStyle = p.color;\r\n        ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);\r\n        ctx.restore();\r\n\r\n        if (p.y > canvas.height) {\r\n          p.y = -10;\r\n          p.x = Math.random() * canvas.width;\r\n        }\r\n      });\r\n      animationId = requestAnimationFrame(draw);\r\n    };\r\n\r\n    draw();\r\n\r\n    return () => {\r\n      cancelAnimationFrame(animationId);\r\n    };\r\n  }, []);\r\n\r\n  return <canvas ref={canvasRef} className=\"fixed inset-0 pointer-events-none z-50\" />;\r\n};\r\n\r\nconst FinIQChallenge: React.FC<FinIQChallengeProps> = ({ onBack, navigateTo }) => {\r\n  const [gameState, setGameState] = useState<'SETUP' | 'LOADING' | 'PLAYING' | 'RESULTS'>('SETUP');\r\n  const [difficulty, setDifficulty] = useState<QuizDifficulty>('Medium');\r\n  const [mode, setMode] = useState<QuizMode>('Relaxed');\r\n\r\n  const [questions, setQuestions] = useState<QuizQuestion[]>([]);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [userAnswers, setUserAnswers] = useState<any>(null); // Holds current input\r\n  const [results, setResults] = useState<QuizResult[]>([]);\r\n\r\n  // Timer States\r\n  const [timeLeft, setTimeLeft] = useState(0); // In seconds\r\n  const [timeTaken, setTimeTaken] = useState(0); // For current question\r\n\r\n  // Feedback States\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [isCorrect, setIsCorrect] = useState(false);\r\n  const [showConfetti, setShowConfetti] = useState(false);\r\n\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Changed from NodeJS.Timeout to number for browser environment compatibility\r\n  const timerRef = useRef<number | null>(null);\r\n\r\n  // --- CONFETTI EFFECT ---\r\n  useEffect(() => {\r\n    if (gameState === 'RESULTS') {\r\n      const score = results.filter(r => r.isCorrect).length;\r\n      const percentage = (score / 10) * 100;\r\n      if (percentage >= 60) {\r\n        setShowConfetti(true);\r\n        const timer = setTimeout(() => {\r\n          setShowConfetti(false);\r\n        }, 5000); // Disappear after 5 seconds\r\n        return () => clearTimeout(timer);\r\n      }\r\n    }\r\n  }, [gameState, results]);\r\n\r\n  // --- SETUP LOGIC ---\r\n  const handleStart = async () => {\r\n    setGameState('LOADING');\r\n    setError(null);\r\n    try {\r\n      const qs = await generateQuizQuestions(difficulty);\r\n      setQuestions(qs);\r\n      setGameState('PLAYING');\r\n      resetQuestionState();\r\n\r\n      // Initialize Timer based on mode\r\n      if (mode === 'Speed Run') {\r\n        // 5 minutes total\r\n        setTimeLeft(300);\r\n      } else if (mode === 'Blitz') {\r\n        // 45 seconds per question\r\n        setTimeLeft(45);\r\n      } else {\r\n        setTimeLeft(0); // Relaxed: Count up effectively\r\n      }\r\n    } catch (e) {\r\n      setError('Failed to load questions. Please check your connection and try again.');\r\n      setGameState('SETUP');\r\n    }\r\n  };\r\n\r\n  // --- TIMER LOGIC ---\r\n  useEffect(() => {\r\n    if (gameState !== 'PLAYING') return;\r\n\r\n    // If submitted, stop timer but don't clear it (to show time taken)\r\n    if (isSubmitted) return;\r\n\r\n    timerRef.current = window.setInterval(() => {\r\n      setTimeTaken(prev => prev + 1);\r\n\r\n      if (mode !== 'Relaxed') {\r\n        setTimeLeft(prev => {\r\n          if (prev <= 1) {\r\n            handleTimeUp();\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }\r\n    }, 1000);\r\n\r\n    return () => {\r\n      if (timerRef.current) clearInterval(timerRef.current);\r\n    };\r\n  }, [gameState, isSubmitted, mode]);\r\n\r\n  const handleTimeUp = () => {\r\n    if (mode === 'Speed Run') {\r\n      // End entire quiz\r\n      finishQuiz();\r\n    } else if (mode === 'Blitz') {\r\n      // Submit current question as wrong if not answered\r\n      handleSubmit(true);\r\n    }\r\n  };\r\n\r\n  const resetQuestionState = () => {\r\n    setIsSubmitted(false);\r\n    setIsCorrect(false);\r\n    setUserAnswers(null);\r\n    setTimeTaken(0);\r\n    if (mode === 'Blitz') setTimeLeft(45);\r\n  };\r\n\r\n  // --- ANSWER HANDLING ---\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n\r\n  const handleInputChange = (val: any) => {\r\n    if (isSubmitted) return;\r\n    setUserAnswers(val);\r\n  };\r\n\r\n  const handleCheckboxChange = (option: string) => {\r\n    if (isSubmitted) return;\r\n    const current = Array.isArray(userAnswers) ? [...userAnswers] : [];\r\n    if (current.includes(option)) {\r\n      handleInputChange(current.filter(i => i !== option));\r\n    } else {\r\n      handleInputChange([...current, option]);\r\n    }\r\n  };\r\n\r\n  const validateAnswer = (question: QuizQuestion, answer: any): boolean => {\r\n    if (!answer) return false;\r\n\r\n    // Normalize types for validation as well\r\n    const type = question.type?.toLowerCase().trim();\r\n\r\n    switch (type) {\r\n      case 'single_choice':\r\n      case 'true_false':\r\n      case 'truefalse':\r\n        return String(answer) === String(question.correctAnswer);\r\n\r\n      case 'multiple_choice':\r\n        if (!Array.isArray(answer) || !Array.isArray(question.correctAnswer)) return false;\r\n        if (answer.length !== question.correctAnswer.length) return false;\r\n        const sortedAns = [...answer].sort();\r\n        const sortedCorrect = [...(question.correctAnswer as string[])].sort();\r\n        return sortedAns.every((val, index) => val === sortedCorrect[index]);\r\n\r\n      case 'fill_in_blank':\r\n      case 'short_answer':\r\n      default:\r\n        // Use fuzzy matching for text inputs\r\n        const input = String(answer);\r\n        const correct = String(question.correctAnswer);\r\n        const keywords = question.acceptedKeywords || [];\r\n\r\n        // Check main answer with fuzzy logic\r\n        if (isFuzzyMatch(input, correct)) return true;\r\n\r\n        // Check keywords with fuzzy logic\r\n        return keywords.some(keyword => isFuzzyMatch(input, keyword));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (forceTimeUp = false) => {\r\n    if (isSubmitted && !forceTimeUp) return;\r\n\r\n    // If forced by timer and no answer, treat as empty/wrong\r\n    const answerToSubmit = forceTimeUp && !userAnswers ? (currentQuestion.type === 'multiple_choice' ? [] : '') : userAnswers;\r\n\r\n    const correct = validateAnswer(currentQuestion, answerToSubmit);\r\n    setIsCorrect(correct);\r\n    setIsSubmitted(true);\r\n\r\n    setResults(prev => [\r\n      ...prev,\r\n      {\r\n        questionId: currentQuestion.id,\r\n        userAnswer: answerToSubmit,\r\n        isCorrect: correct,\r\n        timeTaken: timeTaken\r\n      }\r\n    ]);\r\n\r\n    if (timerRef.current) clearInterval(timerRef.current);\r\n\r\n    // If Speed Run mode hits 0, we already called finishQuiz in handleTimeUp if it was the trigger.\r\n    // But if user submits the LAST question manually, we need to finish.\r\n    if (currentQuestionIndex === questions.length - 1 && mode !== 'Speed Run' && forceTimeUp) {\r\n      setGameState('RESULTS');\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (currentQuestionIndex < questions.length - 1) {\r\n      setCurrentQuestionIndex(prev => prev + 1);\r\n      resetQuestionState();\r\n    } else {\r\n      finishQuiz();\r\n    }\r\n  };\r\n\r\n  const finishQuiz = () => {\r\n    setGameState('RESULTS');\r\n  };\r\n\r\n  // Helper to render a text input, used as default fallback\r\n  const renderTextInput = (q: QuizQuestion) => (\r\n    <div>\r\n      <input\r\n        type=\"text\"\r\n        value={Array.isArray(userAnswers) ? userAnswers.join(', ') : (userAnswers || '')}\r\n        onChange={(e) => handleInputChange(e.target.value)}\r\n        disabled={isSubmitted}\r\n        placeholder=\"Type your answer here...\"\r\n        className={`w-full p-4 rounded-lg border focus:outline-none focus:ring-2 ${isSubmitted\r\n          ? isCorrect ? \"border-green-500 bg-green-50 text-green-800\" : \"border-red-500 bg-red-50 text-red-800\"\r\n          : \"border-slate-300 focus:ring-blue-500\"\r\n          }`}\r\n      />\r\n      {isSubmitted && !isCorrect && (\r\n        <p className=\"mt-2 text-sm text-red-600\">\r\n          <span className=\"font-semibold\">Correct Answer:</span> {String(q.correctAnswer)}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderInput = () => {\r\n    const q = currentQuestion;\r\n    if (!q) return null;\r\n\r\n    const commonClasses = \"w-full p-4 rounded-lg border transition-all text-left \";\r\n    const getOptionClass = (opt: string, isSelected: boolean) => {\r\n      if (isSubmitted) {\r\n        const isActualCorrect = Array.isArray(q.correctAnswer)\r\n          ? q.correctAnswer.includes(opt)\r\n          : q.correctAnswer === opt;\r\n\r\n        if (isActualCorrect) return \"bg-green-100 border-green-500 text-green-800\";\r\n        if (isSelected && !isActualCorrect) return \"bg-red-100 border-red-500 text-red-800\";\r\n        return \"bg-slate-50 border-slate-200 opacity-50\";\r\n      }\r\n      return isSelected\r\n        ? \"bg-blue-50 border-blue-500 text-blue-800 shadow-md\"\r\n        : \"bg-white border-slate-200 hover:bg-slate-50 hover:border-slate-300\";\r\n    };\r\n\r\n    const type = q.type?.toLowerCase().trim();\r\n\r\n    // Handle True/False\r\n    if (type === 'true_false' || type === 'truefalse') {\r\n      // Default options if missing\r\n      const options = (q.options && q.options.length > 0) ? q.options : ['True', 'False'];\r\n      return (\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          {options.map((opt, idx) => (\r\n            <button\r\n              key={idx}\r\n              onClick={() => handleInputChange(opt)}\r\n              disabled={isSubmitted}\r\n              className={`${commonClasses} text-center ${getOptionClass(opt, userAnswers === opt)}`}\r\n            >\r\n              <span className=\"font-semibold text-lg\">{opt}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Handle Single Choice\r\n    if (type === 'single_choice') {\r\n      if (!q.options || q.options.length === 0) return renderTextInput(q); // Fallback\r\n      return (\r\n        <div className=\"space-y-3\">\r\n          {q.options.map((opt, idx) => (\r\n            <button\r\n              key={idx}\r\n              onClick={() => handleInputChange(opt)}\r\n              disabled={isSubmitted}\r\n              className={commonClasses + getOptionClass(opt, userAnswers === opt)}\r\n            >\r\n              {opt}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Handle Multiple Choice\r\n    if (type === 'multiple_choice') {\r\n      if (!q.options || q.options.length === 0) return renderTextInput(q); // Fallback\r\n      return (\r\n        <div className=\"space-y-3\">\r\n          {q.options.map((opt, idx) => (\r\n            <button\r\n              key={idx}\r\n              onClick={() => handleCheckboxChange(opt)}\r\n              disabled={isSubmitted}\r\n              className={commonClasses + getOptionClass(opt, (userAnswers || []).includes(opt))}\r\n            >\r\n              <div className=\"flex items-center\">\r\n                <div className={`w-5 h-5 rounded border mr-3 flex items-center justify-center transition-colors ${(userAnswers || []).includes(opt) ? 'bg-blue-600 border-blue-600 text-white' : 'border-slate-400'}`}>\r\n                  {(userAnswers || []).includes(opt) && <IconChecklist className=\"w-3 h-3\" />}\r\n                </div>\r\n                {opt}\r\n              </div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Fallback for 'fill_in_blank', 'short_answer', or unknown types\r\n    return renderTextInput(q);\r\n  };\r\n\r\n  // --- RENDER STATES ---\r\n\r\n  if (gameState === 'SETUP') {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-4\">\r\n        <button onClick={onBack} className=\"flex items-center text-sm font-semibold text-blue-600 hover:underline mb-6\">\r\n          <IconArrowUp className=\"h-4 w-4 mr-1 rotate-[-90deg]\" /> Back\r\n        </button>\r\n\r\n        <div className=\"text-center mb-10\">\r\n          <div className=\"bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6 rounded-3xl inline-block mb-4 shadow-xl\">\r\n            <IconBrain className=\"h-12 w-12\" />\r\n          </div>\r\n          <h1 className=\"text-4xl font-bold text-slate-900 mb-2\">FinIQ Challenge</h1>\r\n          <p className=\"text-lg text-slate-600\">Test your financial knowledge and level up your wealth wisdom.</p>\r\n        </div>\r\n\r\n        {error && <p className=\"text-center text-red-600 bg-red-50 p-4 rounded-lg mb-6\">{error}</p>}\r\n\r\n        <div className=\"grid md:grid-cols-2 gap-8 max-w-3xl mx-auto\">\r\n          {/* Difficulty */}\r\n          <div className=\"bg-white p-6 rounded-2xl shadow-lg border border-slate-200\">\r\n            <h3 className=\"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2\">\r\n              <IconTarget className=\"h-6 w-6 text-red-500\" /> Difficulty\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {(['Easy', 'Medium', 'Hard'] as QuizDifficulty[]).map(d => (\r\n                <button\r\n                  key={d}\r\n                  onClick={() => setDifficulty(d)}\r\n                  className={`w-full p-3 rounded-lg border text-left transition-all ${difficulty === d ? 'bg-blue-50 border-blue-500 ring-1 ring-blue-500' : 'hover:bg-slate-50'}`}\r\n                >\r\n                  <span className=\"font-semibold\">{d}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mode */}\r\n          <div className=\"bg-white p-6 rounded-2xl shadow-lg border border-slate-200\">\r\n            <h3 className=\"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2\">\r\n              <IconClock className=\"h-6 w-6 text-blue-500\" /> Mode\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {(['Relaxed', 'Speed Run', 'Blitz'] as QuizMode[]).map(m => (\r\n                <button\r\n                  key={m}\r\n                  onClick={() => setMode(m)}\r\n                  className={`w-full p-3 rounded-lg border text-left transition-all ${mode === m ? 'bg-purple-50 border-purple-500 ring-1 ring-purple-500' : 'hover:bg-slate-50'}`}\r\n                >\r\n                  <span className=\"font-semibold block\">{m}</span>\r\n                  <span className=\"text-xs text-slate-500\">\r\n                    {m === 'Relaxed' ? 'No time limit. Learn at your own pace.' :\r\n                      m === 'Speed Run' ? '5 minutes to complete 10 questions.' :\r\n                        '45 seconds per question. Think fast!'}\r\n                  </span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-center mt-10\">\r\n          <button\r\n            onClick={handleStart}\r\n            className=\"px-10 py-4 bg-blue-600 text-white text-xl font-bold rounded-full shadow-lg hover:bg-blue-700 hover:scale-105 transition-all transform\"\r\n          >\r\n            Start Quiz\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (gameState === 'LOADING') {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-[60vh]\">\r\n        <div className=\"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-6\"></div>\r\n        <h2 className=\"text-2xl font-semibold text-slate-800 animate-pulse\">Generating Questions...</h2>\r\n        <p className=\"text-slate-500 mt-2\">Using AI to curate your {difficulty} challenge.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (gameState === 'PLAYING') {\r\n    const q = questions[currentQuestionIndex];\r\n    return (\r\n      <div className=\"max-w-3xl mx-auto p-4\">\r\n        {/* Header Bar */}\r\n        <div className=\"flex justify-between items-center mb-6 bg-white p-4 rounded-xl shadow-sm border border-slate-200\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"font-bold text-slate-700\">Q {currentQuestionIndex + 1}/10</span>\r\n            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${difficulty === 'Easy' ? 'bg-green-100 text-green-700' :\r\n              difficulty === 'Medium' ? 'bg-yellow-100 text-yellow-700' :\r\n                'bg-red-100 text-red-700'\r\n              }`}>{difficulty}</span>\r\n          </div>\r\n          <CircularTimer\r\n            time={mode === 'Relaxed' ? timeTaken : timeLeft}\r\n            maxTime={mode === 'Speed Run' ? 300 : mode === 'Blitz' ? 45 : undefined}\r\n            mode={mode}\r\n          />\r\n        </div>\r\n\r\n        {/* Question Card */}\r\n        <div className=\"bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200 mb-6\">\r\n          <h2 className=\"text-xl sm:text-2xl font-bold text-slate-900 mb-6 leading-snug\">\r\n            {q.question}\r\n          </h2>\r\n\r\n          {renderInput()}\r\n\r\n          {/* Feedback Area */}\r\n          {isSubmitted && (\r\n            <div className={`mt-6 p-4 rounded-lg ${isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}>\r\n              <div className=\"flex items-start gap-3\">\r\n                {isCorrect\r\n                  ? <IconChecklist className=\"h-6 w-6 text-green-600\" />\r\n                  : <IconX className=\"h-6 w-6 text-red-600\" />\r\n                }\r\n                <div>\r\n                  <p className={`font-bold ${isCorrect ? 'text-green-800' : 'text-red-800'}`}>\r\n                    {isCorrect ? 'Correct!' : 'Incorrect'}\r\n                  </p>\r\n                  <p className=\"text-slate-700 mt-1 text-sm\">{q.explanation}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex justify-end\">\r\n          {!isSubmitted ? (\r\n            <button\r\n              onClick={() => handleSubmit(false)}\r\n              disabled={!userAnswers || (Array.isArray(userAnswers) && userAnswers.length === 0)}\r\n              className=\"px-8 py-3 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              Submit Answer\r\n            </button>\r\n          ) : (\r\n            <button\r\n              onClick={handleNext}\r\n              className=\"px-8 py-3 bg-slate-800 text-white font-bold rounded-lg shadow-md hover:bg-slate-900 transition-colors flex items-center gap-2\"\r\n            >\r\n              {currentQuestionIndex < 9 ? 'Next Question' : 'Finish Quiz'} <span aria-hidden=\"true\">&rarr;</span>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (gameState === 'RESULTS') {\r\n    const score = results.filter(r => r.isCorrect).length;\r\n    const percentage = (score / 10) * 100;\r\n    const isPass = percentage >= 60;\r\n\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-4\">\r\n        {isPass && showConfetti && <Confetti />}\r\n\r\n        <div className=\"text-center mb-10\">\r\n          <div className={`p-6 rounded-full inline-block mb-4 shadow-xl ${isPass ? 'bg-yellow-400 text-white animate-bounce' : 'bg-slate-200 text-slate-500'}`}>\r\n            {isPass ? <IconParty className=\"h-16 w-16\" /> : <IconTrophy className=\"h-16 w-16\" />}\r\n          </div>\r\n          <h1 className=\"text-4xl font-bold text-slate-900 mb-2\">\r\n            {isPass ? 'Quiz Completed!' : 'Challenge Finished'}\r\n          </h1>\r\n          <p className=\"text-lg text-slate-600\">\r\n            You scored <span className={`font-bold ${isPass ? 'text-green-600' : 'text-red-600'}`}>{score}/10</span> ({percentage}%)\r\n          </p>\r\n          {!isPass && (\r\n            <div className=\"mt-4 p-4 bg-blue-50 rounded-lg inline-block max-w-md\">\r\n              <p className=\"text-blue-800 font-medium mb-2\">Time to tighten up your financial knowledge!</p>\r\n              <button\r\n                onClick={() => navigateTo ? navigateTo('/learn') : onBack()}\r\n                className=\"text-sm text-blue-600 hover:underline font-bold\"\r\n              >\r\n                Go to Learn Section &rarr;\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Review Section */}\r\n        <div className=\"space-y-6\">\r\n          <h3 className=\"text-2xl font-bold text-slate-800 border-b pb-2\">Review Answers</h3>\r\n          {questions.map((q, idx) => {\r\n            const result = results.find(r => r.questionId === q.id);\r\n            const isCorrect = result?.isCorrect;\r\n\r\n            return (\r\n              <div key={q.id} className={`p-6 rounded-xl border ${isCorrect ? 'bg-white border-slate-200' : 'bg-red-50 border-red-200'}`}>\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                  <h4 className=\"font-bold text-lg text-slate-900\">Q{idx + 1}: {q.question}</h4>\r\n                  {isCorrect\r\n                    ? <span className=\"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-bold\">Correct</span>\r\n                    : <span className=\"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full font-bold\">Wrong</span>\r\n                  }\r\n                </div>\r\n\r\n                <div className=\"grid md:grid-cols-2 gap-4 text-sm mt-4\">\r\n                  <div>\r\n                    <span className=\"block text-slate-500 font-semibold\">Your Answer:</span>\r\n                    <span className={isCorrect ? 'text-green-700' : 'text-red-700'}>\r\n                      {Array.isArray(result?.userAnswer)\r\n                        ? result?.userAnswer.join(', ') || '(No Answer)'\r\n                        : result?.userAnswer || '(No Answer)'}\r\n                    </span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"block text-slate-500 font-semibold\">Correct Answer:</span>\r\n                    <span className=\"text-slate-800 font-medium\">\r\n                      {Array.isArray(q.correctAnswer)\r\n                        ? q.correctAnswer.join(', ')\r\n                        : q.correctAnswer}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4 pt-4 border-t border-slate-200/50\">\r\n                  <p className=\"text-slate-600 italic text-sm\">\r\n                    <span className=\"font-semibold not-italic\">Explanation: </span>\r\n                    {q.explanation}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <div className=\"text-center mt-10 mb-10\">\r\n          <button\r\n            onClick={() => setGameState('SETUP')}\r\n            className=\"px-8 py-3 bg-slate-800 text-white font-bold rounded-lg shadow-md hover:bg-slate-900 transition-colors\"\r\n          >\r\n            Try Another Quiz\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default FinIQChallenge;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1849, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/RAGHAV%20GUPTA/Desktop/SIP-Buddy/components/MoreContent.tsx"],"sourcesContent":["import React, { useState, useEffect, Suspense } from 'react';\r\nimport FindAdvisor from './tools/FindAdvisor';\r\nimport FinIQChallenge from './tools/FinIQChallenge';\r\nimport { IconMapPin, IconBrain } from '../components/Icons';\r\nimport { Page } from '../types';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\n\r\nconst tools = [\r\n  {\r\n    id: 'find-advisor',\r\n    title: 'Finance Buddy Near me',\r\n    description: 'Find registered financial advisors in your area using an interactive map.',\r\n    icon: <IconMapPin className=\"h-8 w-8 text-cyan-600\" />,\r\n    component: <FindAdvisor />,\r\n  },\r\n  {\r\n    id: 'finiq-challenge',\r\n    title: 'FinIQ Challenge',\r\n    description: 'Test your financial knowledge with our AI-powered dynamic quiz game.',\r\n    icon: <IconBrain className=\"h-8 w-8 text-indigo-600\" />,\r\n    component: <FinIQChallenge onBack={() => { }} />, // onBack will be overridden in render\r\n  },\r\n];\r\n\r\nconst MoreContent: React.FC = () => {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n  const initialActiveId = searchParams ? searchParams.get('tool') : null;\r\n\r\n  const [activeToolId, setActiveToolId] = useState<string | null>(initialActiveId || null);\r\n\r\n  useEffect(() => {\r\n    setActiveToolId(initialActiveId || null);\r\n  }, [initialActiveId]);\r\n\r\n  const activeTool = tools.find(t => t.id === activeToolId);\r\n\r\n  const handleBack = () => {\r\n    setActiveToolId(null);\r\n    router.push('/more');\r\n  };\r\n\r\n  const navigateTo = (path: string, params?: any) => {\r\n    if (params) {\r\n      // Construct query string\r\n      const queryString = new URLSearchParams(params).toString();\r\n      router.push(`${path}?${queryString}`);\r\n    } else {\r\n      router.push(path);\r\n    }\r\n  };\r\n\r\n  if (activeTool) {\r\n    // Clone the component and pass the onBack prop and navigateTo\r\n    const componentWithProps = React.cloneElement(activeTool.component as React.ReactElement<any>, {\r\n      onBack: handleBack,\r\n      navigateTo: navigateTo\r\n    });\r\n    return (\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <button\r\n          onClick={handleBack}\r\n          className=\"flex items-center text-sm font-semibold text-blue-600 hover:underline mb-6 p-2 -ml-2 rounded-md hover:bg-slate-100 transition-colors\"\r\n          aria-label=\"Back to More Tools\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 19l-7-7 7-7\" /></svg>\r\n          Back to More Tools\r\n        </button>\r\n        {componentWithProps}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl font-bold text-slate-900 mb-2\">More Tools</h1>\r\n        <p className=\"text-lg text-slate-600\">\r\n          Explore additional tools to help with your financial journey.\r\n        </p>\r\n      </div>\r\n      <div className=\"grid md:grid-cols-2 gap-8\">\r\n        {tools.map(tool => (\r\n          <button\r\n            key={tool.id}\r\n            onClick={() => setActiveToolId(tool.id)}\r\n            className=\"bg-white p-8 rounded-2xl shadow-lg border border-slate-200 text-left hover:shadow-xl hover:border-cyan-500 transition-all transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2\"\r\n          >\r\n            <div className=\"bg-slate-100 p-3 rounded-full w-fit mb-4\">\r\n              {tool.icon}\r\n            </div>\r\n            <h2 className=\"text-2xl font-semibold text-slate-800 mb-2\">{tool.title}</h2>\r\n            <p className=\"text-slate-500\">{tool.description}</p>\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst More: React.FC = () => {\r\n  return (\r\n    <Suspense fallback={<div className=\"flex justify-center items-center h-64\"><div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin\"></div></div>}>\r\n      <MoreContent />\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default More;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEA;;;;;;;;AAEA,MAAM,QAAQ;IACZ;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,oBAAM,wNAAC,gKAAU;YAAC,WAAU;;;;;;QAC5B,yBAAW,wNAAC,4KAAW;;;;;IACzB;IACA;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,oBAAM,wNAAC,+JAAS;YAAC,WAAU;;;;;;QAC3B,yBAAW,wNAAC,+KAAc;YAAC,QAAQ,KAAQ;;;;;;IAC7C;CACD;AAED,MAAM,cAAwB;;IAC5B,MAAM,eAAe,IAAA,mLAAe;IACpC,MAAM,SAAS,IAAA,6KAAS;IACxB,MAAM,kBAAkB,eAAe,aAAa,GAAG,CAAC,UAAU;IAElE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,oMAAQ,EAAgB,mBAAmB;IAEnF,IAAA,qMAAS;iCAAC;YACR,gBAAgB,mBAAmB;QACrC;gCAAG;QAAC;KAAgB;IAEpB,MAAM,aAAa,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAE5C,MAAM,aAAa;QACjB,gBAAgB;QAChB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,aAAa,CAAC,MAAc;QAChC,IAAI,QAAQ;YACV,yBAAyB;YACzB,MAAM,cAAc,IAAI,gBAAgB,QAAQ,QAAQ;YACxD,OAAO,IAAI,CAAC,GAAG,KAAK,CAAC,EAAE,aAAa;QACtC,OAAO;YACL,OAAO,IAAI,CAAC;QACd;IACF;IAEA,IAAI,YAAY;QACd,8DAA8D;QAC9D,MAAM,mCAAqB,mMAAK,CAAC,YAAY,CAAC,WAAW,SAAS,EAA6B;YAC7F,QAAQ;YACR,YAAY;QACd;QACA,qBACE,wNAAC;YAAI,WAAU;;8BACb,wNAAC;oBACC,SAAS;oBACT,WAAU;oBACV,cAAW;;sCAEX,wNAAC;4BAAI,OAAM;4BAA6B,WAAU;4BAAe,MAAK;4BAAO,SAAQ;4BAAY,QAAO;sCAAe,cAAA,wNAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAY;gCAAI,GAAE;;;;;;;;;;;wBAA0B;;;;;;;gBAGvN;;;;;;;IAGP;IAEA,qBACE,wNAAC;QAAI,WAAU;;0BACb,wNAAC;gBAAI,WAAU;;kCACb,wNAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,wNAAC;wBAAE,WAAU;kCAAyB;;;;;;;;;;;;0BAIxC,wNAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAA,qBACT,wNAAC;wBAEC,SAAS,IAAM,gBAAgB,KAAK,EAAE;wBACtC,WAAU;;0CAEV,wNAAC;gCAAI,WAAU;0CACZ,KAAK,IAAI;;;;;;0CAEZ,wNAAC;gCAAG,WAAU;0CAA8C,KAAK,KAAK;;;;;;0CACtE,wNAAC;gCAAE,WAAU;0CAAkB,KAAK,WAAW;;;;;;;uBAR1C,KAAK,EAAE;;;;;;;;;;;;;;;;AAcxB;GA1EM;;QACiB,mLAAe;QACrB,6KAAS;;;KAFpB;AA4EN,MAAM,OAAiB;IACrB,qBACE,wNAAC,oMAAQ;QAAC,wBAAU,wNAAC;YAAI,WAAU;sBAAwC,cAAA,wNAAC;gBAAI,WAAU;;;;;;;;;;;kBACxF,cAAA,wNAAC;;;;;;;;;;AAGP;MANM;uCAQS"}},
    {"offset": {"line": 2103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/RAGHAV%20GUPTA/Desktop/SIP-Buddy/app/more/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Suspense } from 'react';\r\nimport More from '../../components/MoreContent';\r\n\r\nexport default function MorePage() {\r\n    return (\r\n        <Suspense fallback={<div>Loading tools...</div>}>\r\n            <More />\r\n        </Suspense>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACpB,qBACI,wNAAC,oMAAQ;QAAC,wBAAU,wNAAC;sBAAI;;;;;;kBACrB,cAAA,wNAAC,mKAAI;;;;;;;;;;AAGjB;KANwB"}}]
}